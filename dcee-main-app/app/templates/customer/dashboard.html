    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Riho admin is super flexible, powerful, clean &amp; modern responsive bootstrap 5 admin template with unlimited possibilities.">
        <meta name="keywords" content="admin template, Riho admin template, dashboard template, flat admin template, responsive admin template, web app">
        <meta name="author" content="pixelstrap">
        <link rel="icon" href="{{ url_for('static', filename='images/favicon.png') }}" type="image/x-icon">
        <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.png') }}" type="image/x-icon">
        <title>Customer Dashboard</title>
        <!-- Google font-->
        <link href="https://fonts.googleapis.com/css?family=Rubik:400,400i,500,500i,700,700i&amp;display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900&amp;display=swap" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/font-awesome.css') }}">
        <!-- ico-font-->
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/vendors/icofont.css') }}">
        <!-- Themify icon-->
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/vendors/themify.css') }}">
        <!-- Flag icon-->
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/vendors/flag-icon.css') }}">
        <!-- Feather icon-->
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/vendors/feather-icon.css') }}">
        <!-- Plugins css start-->
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/vendors/slick.css') }}">
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/vendors/slick-theme.css') }}">
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/vendors/scrollbar.css') }}">
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/vendors/animate.css') }}">
        <!-- Plugins css Ends-->
        <!-- Bootstrap css-->
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/vendors/bootstrap.css') }}">
        <!-- App css-->
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
        <link id="color" rel="stylesheet" href="{{ url_for('static', filename='css/color-1.css') }}" media="screen">
        <!-- Responsive css-->
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/responsive.css') }}">
        <style>
          .product-box {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            transition: box-shadow 0.3s ease;
          }
          .product-box:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
          }
          .product-img {
            height: 200px;
            overflow: hidden;
          }
          .product-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
          }
          .product-details {
            padding: 15px;
          }
          .product-details h6 {
            margin-bottom: 5px;
          }
        </style>
      </head>
      <body>
        <!-- tap on top starts-->
        <div class="tap-top"><i data-feather="chevrons-up"></i></div>
        <!-- tap on tap ends-->
        <!-- page-wrapper Start-->
        <div class="page-wrapper compact-wrapper" id="pageWrapper">
          <!-- Page Header Start-->
          <div class="page-header">
            <div class="header-wrapper row m-0">
              <div class="header-logo-wrapper col-auto p-0">
                <div class="logo-wrapper"><a href="{{ url_for('admin.dashboard') }}"><img class="img-fluid" src="{{ url_for('static', filename='images/logo/logo.png') }}" alt=""></a></div>
                <div class="toggle-sidebar">
                  <div class="status_toggle sidebar-toggle d-flex">        
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g> 
                        <g> 
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M21.0003 6.6738C21.0003 8.7024 19.3551 10.3476 17.3265 10.3476C15.2979 10.3476 13.6536 8.7024 13.6536 6.6738C13.6536 4.6452 15.2979 3 17.3265 3C19.3551 3 21.0003 4.6452 21.0003 6.6738Z" stroke="#130F26" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M10.3467 6.6738C10.3467 8.7024 8.7024 10.3476 6.6729 10.3476C4.6452 10.3476 3 8.7024 3 6.6738C3 4.6452 4.6452 3 6.6729 3C8.7024 3 10.3467 4.6452 10.3467 6.6738Z" stroke="#130F26" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M21.0003 17.2619C21.0003 19.2905 19.3551 20.9348 17.3265 20.9348C15.2979 20.9348 13.6536 19.2905 13.6536 17.2619C13.6536 15.2333 15.2979 13.5881 17.3265 13.5881C19.3551 13.5881 21.0003 15.2333 21.0003 17.2619Z" stroke="#130F26" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M10.3467 17.2619C10.3467 19.2905 8.7024 20.9348 6.6729 20.9348C4.6452 20.9348 3 19.2905 3 17.2619C3 15.2333 4.6452 13.5881 6.6729 13.5881C8.7024 13.5881 10.3467 15.2333 10.3467 17.2619Z" stroke="#130F26" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        </g>
                      </g>
                    </svg>
                  </div>
                </div>
              </div>
              <div class="left-side-header col ps-0 d-none d-md-block">
                <div class="input-group"><span class="input-group-text" id="basic-addon1">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g> 
                        <g> 
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M11.2753 2.71436C16.0029 2.71436 19.8363 6.54674 19.8363 11.2753C19.8363 16.0039 16.0029 19.8363 11.2753 19.8363C6.54674 19.8363 2.71436 16.0039 2.71436 11.2753C2.71436 6.54674 6.54674 2.71436 11.2753 2.71436Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M19.8987 18.4878C20.6778 18.4878 21.3092 19.1202 21.3092 19.8983C21.3092 20.6783 20.6778 21.3097 19.8987 21.3097C19.1197 21.3097 18.4873 20.6783 18.4873 19.8983C18.4873 19.1202 19.1197 18.4878 19.8987 18.4878Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        </g>
                      </g>
                    </svg></span>
                  <input class="form-control" type="text" placeholder="Search here.." aria-label="search" aria-describedby="basic-addon1">
                </div>
              </div>
              <div class="nav-right col-10 col-sm-6 pull-right right-header p-0">
                <ul class="nav-menus">
                  <li>
                    <div class="mode animated backOutRight">
                      <svg class="lighticon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g>
                          <g>                 
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M18.1377 13.7902C19.2217 14.8742 16.3477 21.0542 10.6517 21.0542C6.39771 21.0542 2.94971 17.6062 2.94971 13.3532C2.94971 8.05317 8.17871 4.66317 9.67771 6.16217C10.5407 7.02517 9.56871 11.0862 11.1167 12.6352C12.6647 14.1842 17.0537 12.7062 18.1377 13.7902Z" stroke="#130F26" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                          </g>
                        </g>
                      </svg>
                      <svg class="darkicon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z" stroke="#130F26" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M12 2.08398V4.08398" stroke="#130F26" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M12 20.084V22.084" stroke="#130F26" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M4.22168 4.30078L5.64168 5.72078" stroke="#130F26" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M18.3623 18.4414L19.7823 19.8614" stroke="#130F26" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M2.08398 12H4.08398" stroke="#130F26" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M20.084 12H22.084" stroke="#130F26" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M4.22168 19.7822L5.64168 18.3622" stroke="#130F26" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M18.3623 5.72078L19.7823 4.30078" stroke="#130F26" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                      </svg>
                    </div>
                  </li>
                  
                  <li class="profile-nav onhover-dropdown pe-0 py-0">
                    <div class="media profile-media">
                        <div class="media-body"><span>{{ user.first_name }}</span>
                          <p class="mb-0 font-roboto">Customer <i class="middle fa fa-angle-down"></i></p>
                        </div>
                    </div>
                    <ul class="profile-dropdown onhover-show-div">
                      <li><a href="#" id="myProfileLink"><i data-feather="user"></i><span>My Profile </span></a></li>
                      <li><a href="{{ url_for('auth.login') }}"><i data-feather="log-out"> </i><span>Log out</span></a></li>
                    </ul>
                  </li>
                </ul>
              </div>
              <script class="result-template" type="text/x-handlebars-template">
                <div class="ProfileCard u-cf">                        
                <div class="ProfileCard-avatar"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-airplay m-0"><path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path><polygon points="12 15 17 21 7 21 12 15"></polygon></svg></div>
                <div class="ProfileCard-details">
                <div class="ProfileCard-realName">{{name}}</div>
                </div>
                </div>
              </script>
              <script class="empty-template" type="text/x-handlebars-template"><div class="EmptyMessage">Your search turned up 0 results. This most likely means the backend is down, yikes!</div></script>
            </div>
          </div>
          <!-- Page Header Ends -->
          <!-- Page Body Start-->
          <div class="page-body-wrapper">
            <!-- Page Sidebar Start-->
            <div class="sidebar-wrapper">
              <div>
                <div class="logo-wrapper">
                  <a href="{{ url_for('admin.dashboard') }}"><img class="img-fluid for-light" src="{{ url_for('static', filename='images/logo/1.png') }}" alt=""><img class="img-fluid for-dark" src="{{ url_for('static', filename='images/logo/logo_dark.png') }}" alt=""></a>
                  <div class="back-btn"><i class="fa fa-angle-left"></i></div>
                  <div class="toggle-sidebar"><i class="status_toggle middle sidebar-toggle" data-feather="grid"> </i></div>
                </div>
                <div class="logo-icon-wrapper"><a href="{{ url_for('admin.dashboard') }}"><img class="img-fluid" src="{{ url_for('static', filename='images/logo/logo-icon.png') }}" alt=""></a></div>
                <nav class="sidebar-main">
                  <div class="left-arrow" id="left-arrow"><i data-feather="arrow-left"></i></div>
                  <div id="sidebar-menu">
                    <ul class="sidebar-links" id="simple-bar">
                      <li class="back-btn">
                        <a href="{{ url_for('admin.dashboard') }}"><img class="img-fluid" src="{{ url_for('static', filename='images/logo/logo-icon.png') }}" alt=""></a>
                        <div class="mobile-back text-end"><span>Back</span><i class="fa fa-angle-right ps-2" aria-hidden="true"></i></div>
                      </li>
                      <li class="sidebar-main-title">
                        <div>
                          <h6 class="lan-1">General</h6>
                        </div>
                      </li>
                      <li class="sidebar-list">
                        <a class="sidebar-link sidebar-title" href="#">
                          <svg class="stroke-icon">
                            <use href="{{ url_for('static', filename='svg/icon-sprite.svg#stroke-home') }}"></use>
                          </svg>
                          <svg class="fill-icon">
                            <use href="{{ url_for('static', filename='svg/icon-sprite.svg#fill-home') }}"></use>
                          </svg>
                          <span>Home</span> 
                        </a>
                        <ul class="sidebar-submenu">
                          <li><a href="{{ url_for('customer.dashboard') }}"><i class="fa fa-home"></i> Dashboard</a></li>
                        </ul>
                      </li>
                      <li class="sidebar-list">
                        <a class="sidebar-link sidebar-title" href="#">
                          <svg class="stroke-icon">
                            <use href="{{ url_for('static', filename='svg/icon-sprite.svg#stroke-store') }}"></use>
                          </svg>
                          <svg class="fill-icon">
                            <use href="{{ url_for('static', filename='svg/icon-sprite.svg#fill-store') }}"></use>
                          </svg>
                          <span>Stores</span> 
                        </a>
                        <ul class="sidebar-submenu">
                          <li><a href="{{ url_for('customer.stores') }}"><i class="fa fa-store"></i> All Stores</a></li>
                          <li><a href="#"><i class="fa fa-heart"></i> My Favorites</a></li>
                        </ul>
                      </li>
                      <!-- New Orders Field Added Below Stores -->
                      <li class="sidebar-list">
                        <a class="sidebar-link sidebar-title" href="{{ url_for('customer.orders') }}">
                          <span>Orders</span>
                        </a>
                      </li>
                    </ul>
                  </div>    
                  <div class="right-arrow" id="right-arrow"><i data-feather="arrow-right"></i></div>
                </nav>
              </div>
            </div>
            <!-- Page Sidebar Ends-->
            <div class="page-body">
              <div class="container-fluid">
                <div class="page-title">
                  <div class="row">
                    <div class="col-6">
                      <h4>Dashboard</h4>
                    </div>
                    <div class="col-6">
                      <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="{{ url_for('customer.dashboard') }}">
                          <svg class="stroke-icon">
                            <use href="{{ url_for('static', filename='svg/icon-sprite.svg#stroke-home') }}"></use>
                          </svg></a></li>
                        <li class="breadcrumb-item active">Dashboard</li>
                      </ol>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Container-fluid starts-->
              <div class="container-fluid">
                <!-- Featured Products Section
                <div class="row">
                  <div class="col-sm-12">
                    <div class="card">
                      <div class="card-header">
                        <h5>Featured Products</h5>
                      </div>
                      <div class="card-body">
                        <div class="row">
                          {% for product in featured_products %}
                            <div class="col-md-4 col-sm-6 mb-4">
                              <div class="product-box">
                                <div class="product-img">
                                  <img src="{{ url_for('static', filename='images/products/' + product.image) }}" alt="{{ product.name }}" class="img-fluid">
                                </div>
                                <div class="product-details">
                                  <h6>{{ product.name }}</h6>
                                  <p class="text-muted">{{ product.store_type }}</p>
                                </div>
                              </div>
                            </div>
                          {% endfor %}
                        </div>
                      </div>
                    </div>
                  </div>
                </div> -->

                <!-- Stores Overview Section -->
                <div class="row">
                  <div class="col-sm-12">
                    <div class="card">
                      <div class="card-header">
                        <h5>Stores Overview</h5>
                      </div>
                      <div class="card-body">
                        <h6>Total Stores: {{ stores|length }}</h6>
                        <ul class="list-unstyled mt-3">
                          {% for store in stores %}
                            <li>{{ store.name }}</li>
                          {% endfor %}
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Container-fluid Ends-->
            </div>
            <!-- footer start-->
            <footer class="footer">
              <div class="container-fluid">
                <div class="row">
                  <div class="col-md-12 footer-copyright text-center">
                    <p class="mb-0">Copyright 2024 © DCEE  </p>
                  </div>
                </div>
              </div>
            </footer>
          </div>
        </div>
        <!-- latest jquery-->
        <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
        <!-- Bootstrap js-->
        <script src="{{ url_for('static', filename='js/bootstrap/bootstrap.bundle.min.js') }}"></script>
        <!-- feather icon js-->
        <script src="{{ url_for('static', filename='js/icons/feather-icon/feather.min.js') }}"></script>
        <script src="{{ url_for('static', filename='js/icons/feather-icon/feather-icon.js') }}"></script>
        <!-- scrollbar js-->
        <script src="{{ url_for('static', filename='js/scrollbar/simplebar.js') }}"></script>
        <script src="{{ url_for('static', filename='js/scrollbar/custom.js') }}"></script>
        <!-- Sidebar jquery-->
        <script src="{{ url_for('static', filename='js/config.js') }}"></script>
        <!-- Plugins JS start-->
        <script src="{{ url_for('static', filename='js/sidebar-menu.js') }}"></script>
        <script src="{{ url_for('static', filename='js/prism/prism.min.js') }}"></script>
        <script src="{{ url_for('static', filename='js/clipboard/clipboard.min.js') }}"></script>
        <script src="{{ url_for('static', filename='js/custom-card/custom-card.js') }}"></script>
        <script src="{{ url_for('static', filename='js/height-equal.js') }}"></script>
        <!-- Plugins JS Ends-->
        <!-- Theme js-->
        <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    
        <!-- login js-->
        <!-- Plugin used-->

        <!-- Add this modal HTML at the end of your body tag -->
        <div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="profileModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="profileModalLabel">My Profile</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p><strong>First Name:</strong> <span id="profileFirstName"></span></p>
                <p><strong>Last Name:</strong> <span id="profileLastName"></span></p>
                <p><strong>Email:</strong> <span id="profileEmail" class="text-muted"></span></p> <!-- Changed to span for display -->
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="editProfileBtn">Edit</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Edit Profile Modal -->
        <div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="editProfileModalLabel">Edit Profile</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="editProfileForm" novalidate>
                            <div class="mb-3">
                                <label for="editFirstName" class="form-label">First Name</label>
                                <input type="text" class="form-control" id="editFirstName" required>
                                <div class="invalid-feedback" id="firstNameError"></div>
                            </div>
                            <div class="mb-3">
                                <label for="editLastName" class="form-label">Last Name</label>
                                <input type="text" class="form-control" id="editLastName" required>
                                <div class="invalid-feedback" id="lastNameError"></div>
                            </div>
                            <!-- Removed email input field -->
                            <p><strong>Email:</strong> <span id="editProfileEmail" class="text-muted"></span></p> <!-- Display email -->
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" id="saveProfileBtn">Save Changes</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <script>
        $(document).ready(function() {
            function loadProfileData() {
                $.ajax({
                    url: "{{ url_for('customer.get_profile') }}",
                    type: 'GET',
                    success: function(response) {
                        if (response.success) {
                            $('#profileFirstName').text(response.data.first_name);
                            $('#profileLastName').text(response.data.last_name);
                            $('#profileEmail').text(response.data.email);
                            $('#editProfileEmail').text(response.data.email);
                            $('#profileModal').modal('show');
                        } else {
                            alert('Failed to fetch profile data');
                        }
                    },
                    error: function() {
                        alert('An error occurred while fetching profile data');
                    }
                });
            }

            $('#myProfileLink').on('click', function(e) {
                e.preventDefault();
                loadProfileData();
            });

            $('#editProfileBtn').on('click', function() {
                $('#profileModal').modal('hide');
                $('#editFirstName').val($('#profileFirstName').text());
                $('#editLastName').val($('#profileLastName').text());
                $('#editProfileModal').modal('show');
            });

            function validateInput(input, regex, errorMsg) {
                const value = input.val().trim();
                const isValid = regex.test(value);
                input.toggleClass('is-invalid', !isValid);
                input.toggleClass('is-valid', isValid);
                input.siblings('.invalid-feedback').text(isValid ? '' : errorMsg);
                return isValid;
            }

            function validateForm() {
                const firstNameValid = validateInput($('#editFirstName'), /^[A-Za-z]+$/, 'Should contain only alphabets');
                const lastNameValid = validateInput($('#editLastName'), /^[A-Za-z]+$/, 'Should contain only alphabets');
                return firstNameValid && lastNameValid;
            }

            $('#saveProfileBtn').on('click', function() {
                if (validateForm()) {
                    var updatedData = {
                        first_name: $('#editFirstName').val().trim(),
                        last_name: $('#editLastName').val().trim()
                        // Email is not included as per your requirement
                    };

                    console.log('Updated Data:', updatedData); // Log the data being sent

                    $.ajax({
                        url: "{{ url_for('customer.update_profile') }}",
                        type: 'POST',
                        contentType: 'application/json',
                        data: JSON.stringify(updatedData),
                        success: function(response) {
                            if (response.success) {
                                $('#editProfileModal').modal('hide');
                                loadProfileData();  // Reload the profile data to show updated info
                            } else {
                                alert('Failed to update profile: ' + response.message);
                            }
                        },
                        error: function(xhr, status, error) {
                            console.error('Error:', error); // Log the error for debugging
                            alert('An error occurred while updating the profile: ' + xhr.responseText);
                        }
                    });
                }
            });
        });
        </script>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
      </body>
    </html>